import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.DPDPlp3K.js";const c=JSON.parse('{"title":"代币合约开发","description":"","frontmatter":{"title":"代币合约开发"},"headers":[],"relativePath":"solidity/projects/index.md","filePath":"solidity/projects/index.md","lastUpdated":1747119657000}'),e={name:"solidity/projects/index.md"};function t(p,s,h,r,k,d){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="代币合约开发" tabindex="-1">代币合约开发 <a class="header-anchor" href="#代币合约开发" aria-label="Permalink to &quot;代币合约开发&quot;">​</a></h1><h2 id="_1-代币标准概述" tabindex="-1">1. 代币标准概述 <a class="header-anchor" href="#_1-代币标准概述" aria-label="Permalink to &quot;1. 代币标准概述&quot;">​</a></h2><h3 id="_1-1-erc20标准" tabindex="-1">1.1 ERC20标准 <a class="header-anchor" href="#_1-1-erc20标准" aria-label="Permalink to &quot;1.1 ERC20标准&quot;">​</a></h3><ul><li>同质化代币（Fungible Token）标准，广泛用于主流Token发行。</li><li>主要接口：<code>totalSupply</code>、<code>balanceOf</code>、<code>transfer</code>、<code>approve</code>、<code>transferFrom</code>、<code>allowance</code>。</li><li>典型应用：平台币、稳定币、DeFi流通资产。</li></ul><h3 id="_1-2-erc721标准" tabindex="-1">1.2 ERC721标准 <a class="header-anchor" href="#_1-2-erc721标准" aria-label="Permalink to &quot;1.2 ERC721标准&quot;">​</a></h3><ul><li>非同质化代币（NFT）标准，每个Token唯一。</li><li>主要接口：<code>ownerOf</code>、<code>safeTransferFrom</code>、<code>approve</code>、<code>tokenURI</code>。</li><li>典型应用：数字艺术、游戏资产、门票等。</li></ul><h3 id="_1-3-erc1155标准" tabindex="-1">1.3 ERC1155标准 <a class="header-anchor" href="#_1-3-erc1155标准" aria-label="Permalink to &quot;1.3 ERC1155标准&quot;">​</a></h3><ul><li>多资产标准，支持同一合约下多种Token（同质/非同质）。</li><li>主要接口：<code>balanceOf</code>、<code>safeTransferFrom</code>、<code>safeBatchTransferFrom</code>。</li><li>典型应用：游戏、NFT批量发行、资产聚合。</li></ul><h2 id="_2-代币合约开发流程" tabindex="-1">2. 代币合约开发流程 <a class="header-anchor" href="#_2-代币合约开发流程" aria-label="Permalink to &quot;2. 代币合约开发流程&quot;">​</a></h2><h3 id="_2-1-标准接口实现" tabindex="-1">2.1 标准接口实现 <a class="header-anchor" href="#_2-1-标准接口实现" aria-label="Permalink to &quot;2.1 标准接口实现&quot;">​</a></h3><ul><li>推荐使用OpenZeppelin等成熟库，安全可靠。</li><li>可通过继承ERC20/ERC721/ERC1155快速实现标准功能。</li></ul><h3 id="_2-2-代币发行与销毁" tabindex="-1">2.2 代币发行与销毁 <a class="header-anchor" href="#_2-2-代币发行与销毁" aria-label="Permalink to &quot;2.2 代币发行与销毁&quot;">​</a></h3><ul><li>发行（Mint）：合约部署时或后续铸造新Token。</li><li>销毁（Burn）：销毁指定账户的Token，减少总量。</li></ul><h3 id="_2-3-代币转账与授权" tabindex="-1">2.3 代币转账与授权 <a class="header-anchor" href="#_2-3-代币转账与授权" aria-label="Permalink to &quot;2.3 代币转账与授权&quot;">​</a></h3><ul><li>转账：<code>transfer</code>（ERC20）、<code>safeTransferFrom</code>（ERC721/1155）。</li><li>授权：<code>approve</code>、<code>setApprovalForAll</code>，便于第三方合约操作Token。</li></ul><h2 id="_3-安全性与合规性" tabindex="-1">3. 安全性与合规性 <a class="header-anchor" href="#_3-安全性与合规性" aria-label="Permalink to &quot;3. 安全性与合规性&quot;">​</a></h2><h3 id="_3-1-常见安全风险" tabindex="-1">3.1 常见安全风险 <a class="header-anchor" href="#_3-1-常见安全风险" aria-label="Permalink to &quot;3.1 常见安全风险&quot;">​</a></h3><ul><li>溢出/下溢（Solidity 0.8+已内置检查）</li><li>重入攻击（如ERC777、ERC721回调）</li><li>授权滥用（approve/transferFrom被盗用）</li><li>黑名单/白名单绕过</li></ul><h3 id="_3-2-合规性注意事项" tabindex="-1">3.2 合规性注意事项 <a class="header-anchor" href="#_3-2-合规性注意事项" aria-label="Permalink to &quot;3.2 合规性注意事项&quot;">​</a></h3><ul><li>遵守当地法律法规，防止非法集资、洗钱等风险</li><li>透明披露Token分配、销毁、增发等规则</li><li>关注KYC/AML等合规要求</li></ul><h2 id="_4-代币合约扩展功能" tabindex="-1">4. 代币合约扩展功能 <a class="header-anchor" href="#_4-代币合约扩展功能" aria-label="Permalink to &quot;4. 代币合约扩展功能&quot;">​</a></h2><h3 id="_4-1-可升级代币" tabindex="-1">4.1 可升级代币 <a class="header-anchor" href="#_4-1-可升级代币" aria-label="Permalink to &quot;4.1 可升级代币&quot;">​</a></h3><ul><li>采用代理模式（如UUPS、Transparent Proxy）实现合约逻辑升级</li><li>注意存储布局兼容与升级权限安全</li></ul><h3 id="_4-2-白名单与黑名单" tabindex="-1">4.2 白名单与黑名单 <a class="header-anchor" href="#_4-2-白名单与黑名单" aria-label="Permalink to &quot;4.2 白名单与黑名单&quot;">​</a></h3><ul><li>仅允许白名单地址参与转账/铸造/销毁</li><li>黑名单机制可冻结或阻止特定账户操作</li></ul><h2 id="_5-示例代码" tabindex="-1">5. 示例代码 <a class="header-anchor" href="#_5-示例代码" aria-label="Permalink to &quot;5. 示例代码&quot;">​</a></h2><h3 id="_5-1-erc20-代币" tabindex="-1">5.1 ERC20 代币 <a class="header-anchor" href="#_5-1-erc20-代币" aria-label="Permalink to &quot;5.1 ERC20 代币&quot;">​</a></h3><div class="language-solidity vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SPDX-License-Identifier: MIT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pragma</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> solidity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ^0.8.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@title</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 简单ERC20代币</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">contract</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyToken</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ERC20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ERC20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&quot;MyToken&quot;, &quot;MTK&quot;) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        _mint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">msg.sender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> **</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> decimals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_5-2-erc721-代币" tabindex="-1">5.2 ERC721 代币 <a class="header-anchor" href="#_5-2-erc721-代币" aria-label="Permalink to &quot;5.2 ERC721 代币&quot;">​</a></h3><div class="language-solidity vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SPDX-License-Identifier: MIT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pragma</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> solidity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ^0.8.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@title</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 简单NFT合约</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">contract</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyNFT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ERC721</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    uint256</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextTokenId;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ERC721</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&quot;MyNFT&quot;, &quot;MNFT&quot;) {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">address</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        _safeMint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(to, nextTokenId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        nextTokenId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_5-3-erc1155-代币" tabindex="-1">5.3 ERC1155 代币 <a class="header-anchor" href="#_5-3-erc1155-代币" aria-label="Permalink to &quot;5.3 ERC1155 代币&quot;">​</a></h3><div class="language-solidity vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SPDX-License-Identifier: MIT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pragma</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> solidity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ^0.8.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@openzeppelin/contracts/token/ERC1155/ERC1155.sol&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@title</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 简单ERC1155合约</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">contract</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> My1155</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ERC1155</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ERC1155</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&quot;https://api.example.com/metadata/{id}.json&quot;) {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">address</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uint256</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uint256</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        _mint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(to, id, amount, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_6-常见问题与注意事项" tabindex="-1">6. 常见问题与注意事项 <a class="header-anchor" href="#_6-常见问题与注意事项" aria-label="Permalink to &quot;6. 常见问题与注意事项&quot;">​</a></h2><ul><li><strong>如何选择代币标准？</strong> 根据业务需求选择ERC20（同质）、ERC721（NFT）、ERC1155（多资产）。</li><li><strong>如何保证合约安全？</strong> 选用成熟库、充分测试、关注授权与外部调用。</li><li><strong>如何实现合约升级？</strong> 采用代理模式，注意存储兼容与权限。</li><li><strong>如何满足合规要求？</strong> 结合白名单、黑名单、KYC等机制，遵守法律法规。</li><li><strong>如何优化Gas消耗？</strong> 合理设计存储、批量操作、事件日志等。</li></ul><hr><p>如需深入了解代币合约开发，可参考OpenZeppelin官方文档、EIP标准与主流项目源码。</p>`,36)]))}const E=i(e,[["render",t]]);export{c as __pageData,E as default};
