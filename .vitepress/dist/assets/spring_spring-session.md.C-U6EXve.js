import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.DPDPlp3K.js";const E=JSON.parse('{"title":"Spring Session 详解","description":"","frontmatter":{"title":"Spring Session 详解"},"headers":[],"relativePath":"spring/spring-session.md","filePath":"spring/spring-session.md","lastUpdated":1747111449000}'),l={name:"spring/spring-session.md"};function t(r,s,h,p,o,k){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="spring-session-详解" tabindex="-1">Spring Session 详解 <a class="header-anchor" href="#spring-session-详解" aria-label="Permalink to &quot;Spring Session 详解&quot;">​</a></h1><hr><h2 id="_1-分布式会话架构与spring-session生态全景" tabindex="-1">1. 分布式会话架构与Spring Session生态全景 <a class="header-anchor" href="#_1-分布式会话架构与spring-session生态全景" aria-label="Permalink to &quot;1. 分布式会话架构与Spring Session生态全景&quot;">​</a></h2><h3 id="_1-1-分布式会话场景与优势" tabindex="-1">1.1 分布式会话场景与优势 <a class="header-anchor" href="#_1-1-分布式会话场景与优势" aria-label="Permalink to &quot;1.1 分布式会话场景与优势&quot;">​</a></h3><ul><li>多节点共享登录、横向扩展、无粘性负载均衡</li><li>解决Tomcat/JVM本地Session不共享、失效同步难题</li></ul><h3 id="_1-2-spring-session-生态组件" tabindex="-1">1.2 Spring Session 生态组件 <a class="header-anchor" href="#_1-2-spring-session-生态组件" aria-label="Permalink to &quot;1.2 Spring Session 生态组件&quot;">​</a></h3><ul><li>SessionRepository、Session、SessionRepositoryFilter</li><li>支持存储：Redis、JDBC、Hazelcast、MongoDB等</li><li>集成：Spring Security、Spring Boot、Spring Cloud</li></ul><h3 id="_1-3-架构图" tabindex="-1">1.3 架构图 <a class="header-anchor" href="#_1-3-架构图" aria-label="Permalink to &quot;1.3 架构图&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[Client] --&gt; B[Gateway/LoadBalancer]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C[App1]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; D[App2]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C &amp; D --&gt; E[SessionRepository(Redis/JDBC...)]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="_2-核心原理与源码极致细化" tabindex="-1">2. 核心原理与源码极致细化 <a class="header-anchor" href="#_2-核心原理与源码极致细化" aria-label="Permalink to &quot;2. 核心原理与源码极致细化&quot;">​</a></h2><h3 id="_2-1-sessionrepository-session-filter原理" tabindex="-1">2.1 SessionRepository/Session/Filter原理 <a class="header-anchor" href="#_2-1-sessionrepository-session-filter原理" aria-label="Permalink to &quot;2.1 SessionRepository/Session/Filter原理&quot;">​</a></h3><ul><li>SessionRepository：会话持久化接口，支持多种实现</li><li>Session：会话对象，包含ID、属性、过期时间</li><li>SessionRepositoryFilter：Servlet Filter，拦截请求，管理Session生命周期</li><li>Cookie/Token：Session ID传递载体，支持自定义</li></ul><h3 id="_2-2-源码与时序图" tabindex="-1">2.2 源码与时序图 <a class="header-anchor" href="#_2-2-源码与时序图" aria-label="Permalink to &quot;2.2 源码与时序图&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Client</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Filter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant SessionRepository</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant App</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Client-&gt;&gt;Filter: 请求携带SessionId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Filter-&gt;&gt;SessionRepository: findById(SessionId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SessionRepository--&gt;&gt;Filter: Session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Filter-&gt;&gt;App: 注入Session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    App-&gt;&gt;Filter: 修改Session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Filter-&gt;&gt;SessionRepository: save(Session)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>核心源码：SessionRepositoryFilter、RedisOperationsSessionRepository、JdbcOperationsSessionRepository</li></ul><h3 id="_2-3-配置与实战" tabindex="-1">2.3 配置与实战 <a class="header-anchor" href="#_2-3-配置与实战" aria-label="Permalink to &quot;2.3 配置与实战&quot;">​</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableRedisHttpSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">maxInactiveIntervalInSeconds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SessionConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h2 id="_3-支持的存储极致细化" tabindex="-1">3. 支持的存储极致细化 <a class="header-anchor" href="#_3-支持的存储极致细化" aria-label="Permalink to &quot;3. 支持的存储极致细化&quot;">​</a></h2><h3 id="_3-1-redis" tabindex="-1">3.1 Redis <a class="header-anchor" href="#_3-1-redis" aria-label="Permalink to &quot;3.1 Redis&quot;">​</a></h3><ul><li>高性能、分布式、支持过期、消息通知</li><li>配置：spring.session.store-type=redis</li><li>源码：RedisOperationsSessionRepository</li></ul><h3 id="_3-2-jdbc" tabindex="-1">3.2 JDBC <a class="header-anchor" href="#_3-2-jdbc" aria-label="Permalink to &quot;3.2 JDBC&quot;">​</a></h3><ul><li>兼容性好，适合小规模集群</li><li>配置：spring.session.store-type=jdbc</li><li>源码：JdbcOperationsSessionRepository</li><li>建表SQL：</li></ul><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SPRING_SESSION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  PRIMARY_ID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SESSION_ID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  CREATION_TIME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LAST_ACCESS_TIME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  MAX_INACTIVE_INTERVAL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  EXPIRY_TIME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  PRINCIPAL_NAME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  CONSTRAINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SPRING_SESSION_UK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SESSION_ID)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SPRING_SESSION_ATTRIBUTES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SESSION_PRIMARY_ID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ATTRIBUTE_NAME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ATTRIBUTE_BYTES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BYTEA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  CONSTRAINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SPRING_SESSION_ATTRIBUTES_PK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SESSION_PRIMARY_ID, ATTRIBUTE_NAME),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  CONSTRAINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SPRING_SESSION_ATTRIBUTES_FK </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SESSION_PRIMARY_ID) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SPRING_SESSION(PRIMARY_ID) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON DELETE CASCADE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_3-3-hazelcast-mongodb" tabindex="-1">3.3 Hazelcast/MongoDB <a class="header-anchor" href="#_3-3-hazelcast-mongodb" aria-label="Permalink to &quot;3.3 Hazelcast/MongoDB&quot;">​</a></h3><ul><li>Hazelcast：内存分布式缓存，适合高并发</li><li>MongoDB：文档型存储，适合大数据量</li><li>配置：spring.session.store-type=hazelcast/mongodb</li></ul><hr><h2 id="_4-session序列化、失效、并发、过期、刷新、踢人下线极致细化" tabindex="-1">4. Session序列化、失效、并发、过期、刷新、踢人下线极致细化 <a class="header-anchor" href="#_4-session序列化、失效、并发、过期、刷新、踢人下线极致细化" aria-label="Permalink to &quot;4. Session序列化、失效、并发、过期、刷新、踢人下线极致细化&quot;">​</a></h2><h3 id="_4-1-序列化机制" tabindex="-1">4.1 序列化机制 <a class="header-anchor" href="#_4-1-序列化机制" aria-label="Permalink to &quot;4.1 序列化机制&quot;">​</a></h3><ul><li>支持JDK、JSON、Kryo等多种序列化</li><li>配置：spring.session.redis.serializer=xxx</li></ul><h3 id="_4-2-失效与过期" tabindex="-1">4.2 失效与过期 <a class="header-anchor" href="#_4-2-失效与过期" aria-label="Permalink to &quot;4.2 失效与过期&quot;">​</a></h3><ul><li>maxInactiveIntervalInSeconds、Session超时自动清理</li><li>Redis支持Keyspace通知，JDBC定时清理</li></ul><h3 id="_4-3-并发与刷新" tabindex="-1">4.3 并发与刷新 <a class="header-anchor" href="#_4-3-并发与刷新" aria-label="Permalink to &quot;4.3 并发与刷新&quot;">​</a></h3><ul><li>支持同一用户多端并发、Session刷新续期</li><li>配置：spring.session.redis.flush-mode=on-save/instant</li></ul><h3 id="_4-4-踢人下线" tabindex="-1">4.4 踢人下线 <a class="header-anchor" href="#_4-4-踢人下线" aria-label="Permalink to &quot;4.4 踢人下线&quot;">​</a></h3><ul><li>后台/接口删除Session、强制失效</li><li>实战：SessionRepository.deleteById(sessionId)</li></ul><hr><h2 id="_5-跨域、单点登录、会话同步极致细化" tabindex="-1">5. 跨域、单点登录、会话同步极致细化 <a class="header-anchor" href="#_5-跨域、单点登录、会话同步极致细化" aria-label="Permalink to &quot;5. 跨域、单点登录、会话同步极致细化&quot;">​</a></h2><h3 id="_5-1-跨域session" tabindex="-1">5.1 跨域Session <a class="header-anchor" href="#_5-1-跨域session" aria-label="Permalink to &quot;5.1 跨域Session&quot;">​</a></h3><ul><li>支持Cookie Domain配置、Token传递、前后端分离</li></ul><h3 id="_5-2-单点登录-sso-与多端同步" tabindex="-1">5.2 单点登录（SSO）与多端同步 <a class="header-anchor" href="#_5-2-单点登录-sso-与多端同步" aria-label="Permalink to &quot;5.2 单点登录（SSO）与多端同步&quot;">​</a></h3><ul><li>Session共享、Token同步、OAuth2/JWT集成</li><li>实战：Spring Session + Spring Security + OAuth2</li></ul><h3 id="_5-3-会话隔离" tabindex="-1">5.3 会话隔离 <a class="header-anchor" href="#_5-3-会话隔离" aria-label="Permalink to &quot;5.3 会话隔离&quot;">​</a></h3><ul><li>多租户、子系统隔离、Session命名空间</li></ul><hr><h2 id="_6-安全机制极致细化" tabindex="-1">6. 安全机制极致细化 <a class="header-anchor" href="#_6-安全机制极致细化" aria-label="Permalink to &quot;6. 安全机制极致细化&quot;">​</a></h2><h3 id="_6-1-防劫持、防重放、防穿透" tabindex="-1">6.1 防劫持、防重放、防穿透 <a class="header-anchor" href="#_6-1-防劫持、防重放、防穿透" aria-label="Permalink to &quot;6.1 防劫持、防重放、防穿透&quot;">​</a></h3><ul><li>HttpOnly、Secure、SameSite Cookie</li><li>SessionId签名、加密、定期轮换</li><li>Token防重放、接口签名</li></ul><h3 id="_6-2-csrf防护" tabindex="-1">6.2 CSRF防护 <a class="header-anchor" href="#_6-2-csrf防护" aria-label="Permalink to &quot;6.2 CSRF防护&quot;">​</a></h3><ul><li>Spring Security集成CSRF Token</li><li>配置：spring.security.enable-csrf=true</li></ul><h3 id="_6-3-攻防演练与自动化测试" tabindex="-1">6.3 攻防演练与自动化测试 <a class="header-anchor" href="#_6-3-攻防演练与自动化测试" aria-label="Permalink to &quot;6.3 攻防演练与自动化测试&quot;">​</a></h3><ul><li>Session劫持脚本、重放攻击脚本、自动化安全测试</li></ul><hr><h2 id="_7-与spring-security-boot-cloud集成极致细化" tabindex="-1">7. 与Spring Security/Boot/Cloud集成极致细化 <a class="header-anchor" href="#_7-与spring-security-boot-cloud集成极致细化" aria-label="Permalink to &quot;7. 与Spring Security/Boot/Cloud集成极致细化&quot;">​</a></h2><h3 id="_7-1-spring-security集成" tabindex="-1">7.1 Spring Security集成 <a class="header-anchor" href="#_7-1-spring-security集成" aria-label="Permalink to &quot;7.1 Spring Security集成&quot;">​</a></h3><ul><li>自动替换原生Session、支持RememberMe、会话并发控制</li><li>配置：spring.session.store-type=redis</li></ul><h3 id="_7-2-spring-boot自动装配" tabindex="-1">7.2 Spring Boot自动装配 <a class="header-anchor" href="#_7-2-spring-boot自动装配" aria-label="Permalink to &quot;7.2 Spring Boot自动装配&quot;">​</a></h3><ul><li>spring-boot-starter-session、自动注册Filter、配置优先级</li></ul><h3 id="_7-3-spring-cloud集成" tabindex="-1">7.3 Spring Cloud集成 <a class="header-anchor" href="#_7-3-spring-cloud集成" aria-label="Permalink to &quot;7.3 Spring Cloud集成&quot;">​</a></h3><ul><li>Gateway/Zuul Token透传、全局会话、微服务共享</li></ul><h3 id="_7-4-监控与健康检查" tabindex="-1">7.4 监控与健康检查 <a class="header-anchor" href="#_7-4-监控与健康检查" aria-label="Permalink to &quot;7.4 监控与健康检查&quot;">​</a></h3><ul><li>Actuator端点、Session统计、Prometheus监控、告警脚本</li></ul><hr><h2 id="_8-生产环境部署、运维、ci-cd极致细化" tabindex="-1">8. 生产环境部署、运维、CI/CD极致细化 <a class="header-anchor" href="#_8-生产环境部署、运维、ci-cd极致细化" aria-label="Permalink to &quot;8. 生产环境部署、运维、CI/CD极致细化&quot;">​</a></h2><h3 id="_8-1-dockerfile-k8s部署yaml" tabindex="-1">8.1 Dockerfile/K8s部署YAML <a class="header-anchor" href="#_8-1-dockerfile-k8s部署yaml" aria-label="Permalink to &quot;8.1 Dockerfile/K8s部署YAML&quot;">​</a></h3><ul><li>Dockerfile、k8s-deployment.yaml、健康检查、弹性伸缩</li></ul><h3 id="_8-2-自动化运维与ci-cd" tabindex="-1">8.2 自动化运维与CI/CD <a class="header-anchor" href="#_8-2-自动化运维与ci-cd" aria-label="Permalink to &quot;8.2 自动化运维与CI/CD&quot;">​</a></h3><ul><li>Jenkinsfile、定时清理、失效告警、日志采集</li></ul><hr><h2 id="_9-常见问题与faq、面试高频题、最佳实践极致细化" tabindex="-1">9. 常见问题与FAQ、面试高频题、最佳实践极致细化 <a class="header-anchor" href="#_9-常见问题与faq、面试高频题、最佳实践极致细化" aria-label="Permalink to &quot;9. 常见问题与FAQ、面试高频题、最佳实践极致细化&quot;">​</a></h2><h3 id="_9-1-faq" tabindex="-1">9.1 FAQ <a class="header-anchor" href="#_9-1-faq" aria-label="Permalink to &quot;9.1 FAQ&quot;">​</a></h3><ul><li>如何实现分布式会话共享？</li><li>如何踢人下线？</li><li>如何防止Session劫持与重放？</li><li>如何与Spring Security/Cloud集成？</li><li>如何监控Session状态？</li></ul><h3 id="_9-2-高频面试题与标准答案" tabindex="-1">9.2 高频面试题与标准答案 <a class="header-anchor" href="#_9-2-高频面试题与标准答案" aria-label="Permalink to &quot;9.2 高频面试题与标准答案&quot;">​</a></h3><ul><li>Q: Spring Session核心组件？ A: SessionRepository、Session、SessionRepositoryFilter、支持多种存储、与Spring Security/Boot/Cloud集成。</li><li>Q: 如何实现Session失效与踢人下线？ A: 设置超时时间、后台/接口删除Session、SessionRepository.deleteById。</li><li>Q: 如何防止Session劫持？ A: HttpOnly、Secure、SameSite、SessionId签名、加密、定期轮换。</li><li>Q: 如何与Spring Cloud Gateway集成？ A: Token透传、全局Session、微服务共享。</li></ul><h3 id="_9-3-最佳实践" tabindex="-1">9.3 最佳实践 <a class="header-anchor" href="#_9-3-最佳实践" aria-label="Permalink to &quot;9.3 最佳实践&quot;">​</a></h3><ul><li>Session/Token/存储/安全分层设计</li><li>统一异常处理与告警</li><li>生产环境安全基线与自动化测试</li><li>自动化监控与运维</li></ul><hr><blockquote><p>本文档已极致细化 Spring Session 全部核心与进阶知识点，适合企业级分布式会话架构设计、攻防实战与面试深度准备。</p></blockquote>`,79)]))}const c=i(l,[["render",t]]);export{E as __pageData,c as default};
