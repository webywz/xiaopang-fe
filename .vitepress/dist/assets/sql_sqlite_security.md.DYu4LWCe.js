import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.DPDPlp3K.js";const c=JSON.parse('{"title":"SQLite 数据库安全","description":"","frontmatter":{},"headers":[],"relativePath":"sql/sqlite/security.md","filePath":"sql/sqlite/security.md","lastUpdated":1747206212000}'),e={name:"sql/sqlite/security.md"};function h(t,s,p,r,k,d){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="sqlite-数据库安全" tabindex="-1">SQLite 数据库安全 <a class="header-anchor" href="#sqlite-数据库安全" aria-label="Permalink to &quot;SQLite 数据库安全&quot;">​</a></h1><h2 id="_1-账户与权限管理" tabindex="-1">1. 账户与权限管理 <a class="header-anchor" href="#_1-账户与权限管理" aria-label="Permalink to &quot;1. 账户与权限管理&quot;">​</a></h2><ul><li>SQLite 无内置账户体系，依赖操作系统文件权限</li><li>建议仅授权应用进程读写，其他用户只读或无权限</li></ul><h2 id="_2-数据加密与脱敏" tabindex="-1">2. 数据加密与脱敏 <a class="header-anchor" href="#_2-数据加密与脱敏" aria-label="Permalink to &quot;2. 数据加密与脱敏&quot;">​</a></h2><ul><li>可用 SQLCipher 等扩展实现数据库文件加密</li><li>敏感字段建议应用层加密或脱敏存储</li></ul><h2 id="_3-审计与日志" tabindex="-1">3. 审计与日志 <a class="header-anchor" href="#_3-审计与日志" aria-label="Permalink to &quot;3. 审计与日志&quot;">​</a></h2><ul><li>无内置审计功能，可通过应用层日志记录关键操作</li></ul><h2 id="_4-防-sql-注入与安全开发" tabindex="-1">4. 防 SQL 注入与安全开发 <a class="header-anchor" href="#_4-防-sql-注入与安全开发" aria-label="Permalink to &quot;4. 防 SQL 注入与安全开发&quot;">​</a></h2><ul><li>所有输入参数必须参数化，严禁拼接 SQL</li><li>定期安全审计，限制数据库文件访问</li></ul><h2 id="_5-备份文件安全" tabindex="-1">5. 备份文件安全 <a class="header-anchor" href="#_5-备份文件安全" aria-label="Permalink to &quot;5. 备份文件安全&quot;">​</a></h2><ul><li>备份文件加密存储，限制访问权限</li><li>备份文件定期归档、异地存储</li></ul><h2 id="_6-常见安全风险与最佳实践" tabindex="-1">6. 常见安全风险与最佳实践 <a class="header-anchor" href="#_6-常见安全风险与最佳实践" aria-label="Permalink to &quot;6. 常见安全风险与最佳实践&quot;">​</a></h2><ul><li>数据库文件被恶意复制或篡改</li><li>生产环境数据库文件权限最小化</li><li>定期安全加固与漏洞修复</li></ul><h2 id="_7-node-js-代码示例-含-jsdoc-注释" tabindex="-1">7. Node.js 代码示例（含 JSDoc 注释） <a class="header-anchor" href="#_7-node-js-代码示例-含-jsdoc-注释" aria-label="Permalink to &quot;7. Node.js 代码示例（含 JSDoc 注释）&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 参数化查询防止 SQL 注入</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {sqlite3.Database}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Promise&lt;object|null&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUserByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SELECT * FROM users WHERE username = ?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [username], (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(row </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><p>SQLite 安全依赖操作系统权限与应用层加固，建议定期审计与加密关键数据。</p>`,17)]))}const o=i(e,[["render",h]]);export{c as __pageData,o as default};
